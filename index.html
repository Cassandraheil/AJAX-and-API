<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Cartoon-Gifs</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
     <div class="container">
        <h1>Cartoon Gifs!</h1>

        <form id="cartoon-form">
            <label for="cartoon-input">Add Your Favorite Cartoon!</label>
            <input type="text" id="cartoon-input">
            <br>
            <input id="add-cartoon" type="submit" value="Add Cartoon">
          </form>

        <div id="buttons"></div>
    </div>

        <div id="cartoon"></div>
       
  

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">

        var cartoons =["Adventure Time", "Avatar the Last Airbender", "Steven Universe"]

        function showCartoonGif(){
            var cartoon =$(this).attr("data-name");
            console.log("this is cartoon" +cartoon);
            var queryURl = "https://api.giphy.com/v1/gifs/search?api_key=ESe6x6KrBEmJ9cQ8Z5QdiE7QbPS28OVI&q="+ cartoon+ "&limit=10&offset=0&rating=PG-13&lang=en";

            $.ajax({
                url: queryURl,
                method: "GET"
            }).then(function(response){
                console.log(response);
                var cartoonInfo = $("<div class='cartoonInfo'>");
            for (var i=0; i<25; i++){

                var titleGrab = response.data[i].title;  
                var title =$("<p>").text("Title: "+ titleGrab);
                title.addClass("gif")
                cartoonInfo.append(title);
                console.log("title: ", title);

                var rateGrab = response.data[i].rating;  
                var rates =$("<p>").text("Rating: "+ rateGrab);
                rates.addClass("gif")
                cartoonInfo.append(rates);
                console.log("rates: ", rates)

                var gifGrab = response.data[i].images.original_still.url;
                var gif = $("<img>").attr("src", gifGrab);
                gif.addClass("gif")
                gif.attr("alt", "cartoon images")
                cartoonInfo.append(gif);
                console.log("gif url: ", gif);
                $("#cartoon").prepend(cartoonInfo);

                $("#cartoon").on("click", function(){
                    console.log()
                    if ($(this)=== gifGrab){
                        console.log("this is a test")
                        gifGrab = response.data[i].images.fixed_height_downsampled.url;    
                    }
                    else{
                        console.log("should stop")
                        gifGrab = response.data[i].images.original_still.url;
                    }
                })  
            }
                             
            });
        }

        function makeButton(){
            $("#buttons").empty();

            for (var i=0; i<cartoons.length; i++){
                var newButton =$("<button>");
                newButton.addClass("btn");
                newButton.attr("data-name", cartoons[i]);
                newButton.text(cartoons[i]);
                $("#buttons").append(newButton);
            }
        }

        $("#add-cartoon").on("click", function(event){
            event.preventDefault();
            var inputCartoon =$("#cartoon-input").val().trim();

            cartoons.push(inputCartoon)

            makeButton();
        });

        makeButton();

        $(document).on("click",".btn", showCartoonGif);
      
        
    </script>
</body>
</html>